package dev.finley.util;import dev.finley.HeadPlugin;import org.bukkit.Bukkit;import org.bukkit.ChatColor;import org.bukkit.configuration.MemorySection;import org.bukkit.configuration.file.FileConfiguration;import org.bukkit.entity.Player;public class Printer {    public static void sendPlayerMessage(Player player, String key, String... replace) {        sendPlayerMessage(player, key, true, replace);    }    public static void sendPlayerMessage(Player player, String key, boolean language) {        sendPlayerMessage(player, key, language, "");    }    public static void sendPlayerMessage(Player player, String key, boolean language, String... replaces) {        String path = (language ? HeadPlugin.getInstance().getLanguageManager().getSelectedLanguage() + "." : "") + key;        String result = getString(HeadPlugin.getInstance().getMessageFile(), path);        if (result.isBlank()) {            sendMessage("error.language.notFound");            return;        }        result = result.replace("%prefix%", HeadPlugin.getInstance().getPrefix());        result = replaceString(key, result);        for (String repl : replaces) {            String[] split = repl.split("!_!");            if (split.length == 2) {                result = result.replace(split[0], split[1]);            } else {                Printer.sendMessage("Tried to replace not working: " + repl);            }        }        //auto split if memory section        if (result.contains("!_!")) {            String[] split = result.split("!_!");            int i = 0;            for (String s : split) {                i++;                //HARDCODED :(                if (i == split.length) {                    s = s.replace("!", "");                }                sendPlayerNonMessage(player, s);            }        } else {            sendPlayerNonMessage(player, result);        }    }    public static void sendMessage(String key) {        sendMessage(HeadPlugin.getInstance().getLanguageManager().getSelectedLanguage(), key);    }    public static void sendMessage(String language, String key) {        String path = language + "." + key;        String result = getString(HeadPlugin.getInstance().getMessageFile(), path);        if (result.isBlank()) return;        result = replaceString(key, result);        sendNonMessage(result);    }    private static String replaceString(String key, String s) {        //Set automatically the message red if it's an error        if (key.contains("error")) s = "&c" + s;        return s;    }    public static void sendPlayerNonMessage(Player player, String message) {        player.sendMessage(ChatColor.translateAlternateColorCodes('&', HeadPlugin.getInstance().getPrefix() + message));    }    public static void sendNonMessage(String message) {        Bukkit.getConsoleSender().sendMessage(ChatColor.translateAlternateColorCodes('&', HeadPlugin.getInstance().getPrefix() + message));    }    public static String getString(FileConfiguration fileConfiguration, String key) {        if (fileConfiguration == null) return "";        Object s = fileConfiguration.get(key);        switch (s) {            case null -> {                return "";            }            case MemorySection section -> {                StringBuilder result = new StringBuilder();                for (String subKey : section.getKeys(false)) {                    String value = section.getString(subKey, "");                    result.append(value).append("!_!");                }                if (result.length() >= 3) {                    result.setLength(result.length() - 3);                }                s = result.toString();            }            case String string -> s = fileConfiguration.getString(key);            default -> {            }        }        if (s == null) return "invalid";        return s.toString().replace("%name%", HeadPlugin.getInstance().getName().toLowerCase()).replace("%prefix%", HeadPlugin.getInstance().getPrefix());    }    public static String getString(FileConfiguration fileConfiguration, String key, boolean language) {        return getString(fileConfiguration, (language ? HeadPlugin.getInstance().getLanguageManager().getSelectedLanguage() + "." + key : key));    }    public static String getString(FileConfiguration fileConfiguration, String key, boolean language, String... replace) {        String s = getString(fileConfiguration, key, true);        for (String g : replace) {            String[] split = g.split("!_!");            if (split.length == 2) {                s = s.replace(split[0], split[1]);            } else {                System.out.println("Invalid");            }        }        return s;    }}