package dev.finley.listener;import dev.finley.HeadPlugin;import dev.finley.util.Printer;import org.bukkit.entity.Player;import org.bukkit.event.EventHandler;import org.bukkit.event.Listener;import org.bukkit.event.player.AsyncPlayerChatEvent;import java.util.HashMap;import java.util.UUID;public class ChatListener implements Listener {    private final HashMap<UUID, String> changePlayers;    public ChatListener(HashMap<UUID, String> changePlayers) {        this.changePlayers = changePlayers;    }    private static String capitalizeFirstLetter(String str) {        if (str != null && !str.isEmpty() && Character.isLowerCase(str.charAt(0)))            return str.substring(0, 1).toUpperCase() + str.substring(1);        return str;    }    @EventHandler    public void handleChat(AsyncPlayerChatEvent event) {        Player player = event.getPlayer();        String message = event.getMessage();        UUID uuid = player.getUniqueId();        if (changePlayers.containsKey(uuid)) {            String msg = changePlayers.getOrDefault(uuid, "");            if (msg.isBlank()) return;            String[] split = msg.split("!_!");            if (split.length < 3) {                message = message.replace("%name%", HeadPlugin.getInstance().getName().toLowerCase());                String old, updated;                String replace = capitalizeFirstLetter(split[0]);                old = HeadPlugin.getInstance().getConfig().getString("permissions.use" + replace);                HeadPlugin.getInstance().getConfig().set("permissions.use" + replace, message);                HeadPlugin.getInstance().saveConfig();                updated = HeadPlugin.getInstance().getConfig().getString("permissions.use" + replace);                Printer.sendPlayerMessage(player, "success.permission.set", "%old%!_!&a" + old + "&7", "%new%!_!&a" + updated + "&7", "%name%!_!" + HeadPlugin.getInstance().getName().toLowerCase() + "&a");            } else {                return;            }            changePlayers.remove(uuid);            event.setCancelled(true);        }    }}